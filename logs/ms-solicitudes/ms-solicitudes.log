2025-11-21T00:11:26.363Z DEBUG 1 --- [ms-solicitudes] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/v1/usuarios
2025-11-21T00:11:29.052Z DEBUG 1 --- [ms-solicitudes] [http-nio-8083-exec-4] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2025-11-21T00:11:29.098Z DEBUG 1 --- [ms-solicitudes] [http-nio-8083-exec-4] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@8585d4dc, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=172.19.0.8, SessionId=null], Granted Authorities=[ROLE_TRANSPORTISTA, ROLE_ADMIN, ROLE_OPERADOR, ROLE_CLIENTE]]
2025-11-21T00:11:29.125Z DEBUG 1 --- [ms-solicitudes] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/v1/usuarios
2025-11-21T00:11:29.326Z DEBUG 1 --- [ms-solicitudes] [http-nio-8083-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.backend.tpi.ms_solicitudes.controllers.UsuarioController.obtenerTodosLosUsuarios(); target is of class [com.backend.tpi.ms_solicitudes.controllers.UsuarioController]
2025-11-21T00:11:29.369Z DEBUG 1 --- [ms-solicitudes] [http-nio-8083-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.backend.tpi.ms_solicitudes.controllers.UsuarioController.obtenerTodosLosUsuarios(); target is of class [com.backend.tpi.ms_solicitudes.controllers.UsuarioController]
2025-11-21T00:11:29.371Z  INFO 1 --- [ms-solicitudes] [http-nio-8083-exec-4] c.b.t.m.controllers.UsuarioController    : GET /api/v1/usuarios - Administrador obteniendo lista de usuarios
2025-11-21T00:11:29.376Z  INFO 1 --- [ms-solicitudes] [http-nio-8083-exec-4] c.b.t.m.services.UsuarioService          : Obteniendo todos los usuarios del sistema
2025-11-21T00:11:31.643Z  INFO 1 --- [ms-solicitudes] [http-nio-8083-exec-4] c.b.t.m.services.KeycloakService         : Se obtuvieron 7 usuarios del realm
2025-11-21T00:11:33.272Z  INFO 1 --- [ms-solicitudes] [http-nio-8083-exec-4] c.b.t.m.controllers.UsuarioController    : GET /api/v1/usuarios - Respuesta: 200 - 7 usuarios encontrados
2025-11-21T00:12:15.987Z DEBUG 1 --- [ms-solicitudes] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/usuarios/registro
2025-11-21T00:12:16.013Z DEBUG 1 --- [ms-solicitudes] [http-nio-8083-exec-2] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2025-11-21T00:12:16.016Z DEBUG 1 --- [ms-solicitudes] [http-nio-8083-exec-2] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@8585d4dc, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=172.19.0.8, SessionId=null], Granted Authorities=[ROLE_TRANSPORTISTA, ROLE_ADMIN, ROLE_OPERADOR, ROLE_CLIENTE]]
2025-11-21T00:12:16.016Z DEBUG 1 --- [ms-solicitudes] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/usuarios/registro
2025-11-21T00:12:17.040Z DEBUG 1 --- [ms-solicitudes] [http-nio-8083-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.backend.tpi.ms_solicitudes.controllers.UsuarioController.registrarUsuario(com.backend.tpi.ms_solicitudes.dto.UsuarioRegistroDTO); target is of class [com.backend.tpi.ms_solicitudes.controllers.UsuarioController]
2025-11-21T00:12:17.049Z DEBUG 1 --- [ms-solicitudes] [http-nio-8083-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.backend.tpi.ms_solicitudes.controllers.UsuarioController.registrarUsuario(com.backend.tpi.ms_solicitudes.dto.UsuarioRegistroDTO); target is of class [com.backend.tpi.ms_solicitudes.controllers.UsuarioController]
2025-11-21T00:12:17.051Z  INFO 1 --- [ms-solicitudes] [http-nio-8083-exec-2] c.b.t.m.controllers.UsuarioController    : POST /api/v1/usuarios/registro - Administrador registrando nuevo usuario: operador@example.com con rol: OPERADOR
2025-11-21T00:12:17.139Z  INFO 1 --- [ms-solicitudes] [http-nio-8083-exec-2] c.b.t.m.services.UsuarioService          : Iniciando registro de usuario: operador@example.com con rol: OPERADOR
2025-11-21T00:12:17.446Z ERROR 1 --- [ms-solicitudes] [http-nio-8083-exec-2] c.b.t.m.controllers.UsuarioController    : POST /api/v1/usuarios/registro - Error: El username ya est√° en uso
2025-11-21T00:13:19.451Z DEBUG 1 --- [ms-solicitudes] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/usuarios/registro
2025-11-21T00:13:19.462Z DEBUG 1 --- [ms-solicitudes] [http-nio-8083-exec-5] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2025-11-21T00:13:19.464Z DEBUG 1 --- [ms-solicitudes] [http-nio-8083-exec-5] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@8585d4dc, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=172.19.0.8, SessionId=null], Granted Authorities=[ROLE_TRANSPORTISTA, ROLE_ADMIN, ROLE_OPERADOR, ROLE_CLIENTE]]
2025-11-21T00:13:19.465Z DEBUG 1 --- [ms-solicitudes] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/usuarios/registro
2025-11-21T00:13:19.472Z DEBUG 1 --- [ms-solicitudes] [http-nio-8083-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.backend.tpi.ms_solicitudes.controllers.UsuarioController.registrarUsuario(com.backend.tpi.ms_solicitudes.dto.UsuarioRegistroDTO); target is of class [com.backend.tpi.ms_solicitudes.controllers.UsuarioController]
2025-11-21T00:13:19.474Z DEBUG 1 --- [ms-solicitudes] [http-nio-8083-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.backend.tpi.ms_solicitudes.controllers.UsuarioController.registrarUsuario(com.backend.tpi.ms_solicitudes.dto.UsuarioRegistroDTO); target is of class [com.backend.tpi.ms_solicitudes.controllers.UsuarioController]
2025-11-21T00:13:19.475Z  INFO 1 --- [ms-solicitudes] [http-nio-8083-exec-5] c.b.t.m.controllers.UsuarioController    : POST /api/v1/usuarios/registro - Administrador registrando nuevo usuario: pedrito@gmail.com con rol: OPERADOR
2025-11-21T00:13:19.477Z  INFO 1 --- [ms-solicitudes] [http-nio-8083-exec-5] c.b.t.m.services.UsuarioService          : Iniciando registro de usuario: pedrito@gmail.com con rol: OPERADOR
2025-11-21T00:13:21.293Z  INFO 1 --- [ms-solicitudes] [http-nio-8083-exec-5] c.b.t.m.services.KeycloakService         : Usuario creado en Keycloak con ID: e511c599-a813-431d-961b-142f0e889b1c
2025-11-21T00:13:21.719Z  INFO 1 --- [ms-solicitudes] [http-nio-8083-exec-5] c.b.t.m.services.KeycloakService         : Rol OPERADOR asignado al usuario e511c599-a813-431d-961b-142f0e889b1c
2025-11-21T00:13:21.720Z  INFO 1 --- [ms-solicitudes] [http-nio-8083-exec-5] c.b.t.m.services.UsuarioService          : Usuario creado en Keycloak con ID: e511c599-a813-431d-961b-142f0e889b1c y rol: OPERADOR
2025-11-21T00:13:21.730Z  INFO 1 --- [ms-solicitudes] [http-nio-8083-exec-5] c.b.t.m.controllers.UsuarioController    : POST /api/v1/usuarios/registro - Respuesta: 201 - Usuario registrado con rol: OPERADOR
2025-11-21T00:13:28.176Z DEBUG 1 --- [ms-solicitudes] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/v1/usuarios
2025-11-21T00:13:28.190Z DEBUG 1 --- [ms-solicitudes] [http-nio-8083-exec-6] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2025-11-21T00:13:28.191Z DEBUG 1 --- [ms-solicitudes] [http-nio-8083-exec-6] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@8585d4dc, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=172.19.0.8, SessionId=null], Granted Authorities=[ROLE_TRANSPORTISTA, ROLE_ADMIN, ROLE_OPERADOR, ROLE_CLIENTE]]
2025-11-21T00:13:28.194Z DEBUG 1 --- [ms-solicitudes] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/v1/usuarios
2025-11-21T00:13:28.197Z DEBUG 1 --- [ms-solicitudes] [http-nio-8083-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.backend.tpi.ms_solicitudes.controllers.UsuarioController.obtenerTodosLosUsuarios(); target is of class [com.backend.tpi.ms_solicitudes.controllers.UsuarioController]
2025-11-21T00:13:28.199Z DEBUG 1 --- [ms-solicitudes] [http-nio-8083-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.backend.tpi.ms_solicitudes.controllers.UsuarioController.obtenerTodosLosUsuarios(); target is of class [com.backend.tpi.ms_solicitudes.controllers.UsuarioController]
2025-11-21T00:13:28.201Z  INFO 1 --- [ms-solicitudes] [http-nio-8083-exec-6] c.b.t.m.controllers.UsuarioController    : GET /api/v1/usuarios - Administrador obteniendo lista de usuarios
2025-11-21T00:13:28.202Z  INFO 1 --- [ms-solicitudes] [http-nio-8083-exec-6] c.b.t.m.services.UsuarioService          : Obteniendo todos los usuarios del sistema
2025-11-21T00:13:28.651Z  INFO 1 --- [ms-solicitudes] [http-nio-8083-exec-6] c.b.t.m.services.KeycloakService         : Se obtuvieron 8 usuarios del realm
2025-11-21T00:13:29.013Z  INFO 1 --- [ms-solicitudes] [http-nio-8083-exec-6] c.b.t.m.controllers.UsuarioController    : GET /api/v1/usuarios - Respuesta: 200 - 8 usuarios encontrados
